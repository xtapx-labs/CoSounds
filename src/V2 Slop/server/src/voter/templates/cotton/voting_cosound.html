<div class="relative" 
     x-data="{
        type: 'Loading...',
        gain: '--',
        sound: '',
        artist: '',

        updateText() {
            const el = $refs.carousel;
            const items = el.getElementsByClassName('carousel-item');
            
            // Exact same math as your original script
            const width = el.clientWidth;
            const scroll = el.scrollLeft;
            let index = Math.round(scroll / width);
            
            // Bounds check
            if (index < 0) index = 0;
            if (index >= items.length) index = items.length - 1;

            const activeItem = items[index];

            if (activeItem) {
                this.type = activeItem.dataset.layerType;
                this.gain = activeItem.dataset.gain;
                this.sound = activeItem.dataset.soundName;
                this.artist = activeItem.dataset.recordingArtist;
            }
        }
     }"
     x-init="updateText()"
     @hashchange.window="setTimeout(() => updateText(), 100)">

    <div class="carousel-texts absolute inset-0 z-10 pointer-events-none text-white text-shadow-lg font-bold p-4 flex flex-col justify-between">
        <div class="text-left">
            <h2 class="text-2xl" x-text="type"></h2>
            <h5 class="text-md">Gain: <span x-text="gain"></span></h5>
        </div>
        <div class="text-right">
            <h2 class="text-2xl" x-text="sound"></h2>
            <h5 class="text-lg opacity-90" x-text="artist"></h5>
        </div>
    </div>

    <div x-ref="carousel" 
         @scroll.debounce.5ms="updateText()"
         class="carousel max-w-sm aspect-square rounded-box">
        {{ slot }}
    </div>
</div>